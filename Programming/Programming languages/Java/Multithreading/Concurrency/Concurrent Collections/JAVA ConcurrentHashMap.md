06-03-2023
09:20
Authors: Tamerlan Khutuev
***
Tags: #stub #java #programming 
***
# ConcurrentHashMap
Чтобы лучше визуализировать СoncurrentHashMap нужно рассматривать этот класс как группу HashMap’ов. Чтобы брать и класть значения пар(key-value) в HashMap необходимо вычислить хэш-код и найти правильный сегмент массива Collection.Entry. В ConcurrentHashMap отличие заключается во внутренней структуре для хранения пар key-value. ConcurrentHashMap имеет дополнительную концепцию сегментов. Будет легко понять если представить, что один сегмент эквивалентен одному HashMap(концептуально). ConcurrentHashMap разделена на множество сегментов (по умолчанию их число равно 16) при инициализации. ConcurrentHashMap похожим потокам примерно (16) получать одновременный доступ к этому сегменту, каждый поток работает одновременно с высоким параллелизмом. Отсюда, если ваша пара key-value хранится в сегменте 10 не нужно блокировать остальные 15 сегментов дополнительно. Такая структура обеспечивает очень высокий уровень параллелизма.
